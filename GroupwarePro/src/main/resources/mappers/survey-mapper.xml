<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="surveyMapper">

	<resultMap id="surveyResultSet" type="Survey">
		<id property="surveyNo" column="SURVEY_NO"/>
		<result property="surveyTitle" column="SURVEY_TITLE"/>
		<result property="surveyContent" column="SURVEY_CONTENT"/>
		<result property="writeDate" column="WRITE_DATE"/>
		<result property="startDate" column="START_DATE"/>
		<result property="finishDate" column="FINISH_DATE"/>
		<result property="statement" column="STATEMENT"/>
		<result property="questionCount" column="QUESTION_COUNT"/>
	</resultMap>
	
	<select id="selectSurveyList" resultMap="surveyResultSet">
		select *
		from survey
		order by survey_no asc
	</select>
	
	
	<select id="selectSurvey" parameterType="String" resultMap="surveyResultSet">
		select *
		from survey
		where survey_no = #{surveyNo}
	</select>
	
	<insert id="insertSurvey" parameterType="Survey">
		
		insert into survey
		values (seq_survey_no.nextval,#{surveyTitle},#{surveyContent},sysdate,#{startDate},#{finishDate},default,default)
		
	</insert>
	
	
	<delete id="deleteSurvey" parameterType="String">
		
		delete from survey
		where surveyNo = #{surveyNo}
		
	</delete>
	
	<update id="updateSurvey" parameterType="Survey">
		update survey 
		set surveyTitle = #{surveyTitle},
		surveyContent = #{surveyContent},
		write_date = sysdate,
		start_date = #{startDate},
		finish_date = #{finishDate},
		where survey_no = #{surveyNo}
	</update>
	
	<update id="updateQuestionCount" parameterType="_int">
		update survey
		set question_count = #{questionCount}
	</update>
	
	
</mapper>
